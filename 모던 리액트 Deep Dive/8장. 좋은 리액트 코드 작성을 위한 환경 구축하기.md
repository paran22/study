## 8장. 좋은 리액트 코드 작성을 위한 환경 구축하기

### 8.1 ESLint를 활용한 정적 코드 분석

- 정적 코드 분석이란 코드의 실행과는 별개로 코드 그 자체만으로 코드 스멜을 찾아내어 문제의 소지가 있는 코드를 사전에 수정하는 것을 의미한다.
- eslint는 자바스크립트 코드를 문자열로 읽고, 자바스크립트 코드를 분석할 수 있는 파서(parser)로 코드를 구조화한다. 이 구조화된 트리를 AST(Abstract Syntax Tree)라고 하고, 이 트리를 기준으로 각종 규칙과 대조하여 이를 위반한 코드를 알리거나(report) 수정한다(fix).
- espress로 코드를 분석한 결과를 바탕으로 어떤 코드가 잘못된 코드이며 어떻게 수정해야할지 정하는데, 이를 Eslint rules라고 하며, 특정한 규칙의 모음을 plugins라고 한다.
- eslint-config는 eslint-plugin을 묶어서 한 세트로 제공하는 패키지이다.
- prettier와 규칙이 충돌할 수 있다.
  - 서로 규칙이 충돌하지 않게 prettier에서 제공하는 규칙은 eslint에서 끄는 방법이 있다.
  - 자바스크립트/타입스크립트는 Eslint에, 그 외 파일은 모두 prettier에서 처리하도록 eslint-plugin-prettier를 추가할 수 있다.
- 일부 코드에서 특정 규칙을 임시로 제외시키고 싶다면 eslint-disable- 주석을 사용하면 된다.
- eslint 버전이 충돌할 수 있다.

### 8.2 리액트 팀이 권장하는 리액트 테스트 라이브러리

- 백엔드 테스트는 일반적으로 화이트박스 테스트로, 작성한 코드가 의도적으로 작동하는지 확인해야 한다.
- 프론트엔드 테스트는 사용자가 프로그램에서 수행할 주요 비즈니스 로직이나 모든 경우의 수를 고려해야 하며, 프론트엔드 코드를 알 필요가 없는 블랙박스 테스트이다.
- 코드가 어떻게 됐든 상관없이 의도한대로 작동하는지를 확인하는 데 좀 더 초점이 맞춰져 있다.
- 프론트엔드는 사용자에게 완전히 노출된 영역이므로 어떻게 작동할지 최대한 예측해서 확인해야한다.

  > React Testing Library
  >
  > - DOM Testing Library를 기반으로 만들어진 테스팅 라이브러리로, 리엑트를 기반으로 한 테스트를 수행하 위해 만들어졌다.
  > - DOM Testing Library는 jsdom을 기반으로 한다. jsdom은 HTML이 없는 자바스크립트만 존재하는 환경에서 HTML과 DOM을 사용할 수 있도록 해주는 라이브러리이다.
  > - 리엑트 테스팅 라이브러리를 활용하면 실제로 컴포넌트를 렌더링하지 않고도 리엑트 컴포넌트가 원하는대로 렌더링되고 있는지 확인할 수 있다.

- MSW(Mock Service Worker)를 통해 네트워크 요청을 모킹할 수 있다.
- renderHook을 래핑해 커스텀 훅을 테스트할 수 있다.
- 테스트 커버리지는 단순히 얼마나 많은 코드가 테스트되고 있는지를 나타내는 지표일 뿐, 테스트가 잘되고 있는지를 나타내는 것은 아니다.
- 테스트코드를 작성하기 전에 애플리케이션에서 가장 취약하거나 중요한 부분부터 테스트 코드를 하나씩 작성해나가는 것이 중요하다.
